<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>IPFS in the Browser</title>
    <link rel="icon favicon" href="favicon.ico" />

    <!--
      import { createHelia } from 'helia' -> https://unpkg.com/helia@next/dist/index.min.js === root.Helia
      import { createLibp2p } from 'libp2p' -> https://unpkg.com/browse/libp2p@0.42.2/dist/index.min.js === root.Libp2P
      import { noise } from '@chainsafe/libp2p-noise' -> https://unpkg.com/browse/@chainsafe/libp2p-noise@11.0.1/dist/src/index.js === esm module
      import { yamux } from '@chainsafe/libp2p-yamux' -> https://unpkg.com/browse/@chainsafe/libp2p-yamux@3.0.7/dist/index.min.js === root.ChainsafeLibp2PYamux
      import { webSockets } from '@libp2p/websockets' -> https://unpkg.com/@libp2p/websockets@5.0.5/dist/index.min.js === root.Libp2PWebsockets
      import { bootstrap } from '@libp2p/bootstrap' -> https://unpkg.com/@libp2p/bootstrap@6.0.0/dist/index.min.js === root.Libp2PBootstrap
      import { MemoryBlockstore } from 'blockstore-core' -> https://unpkg.com/blockstore-core@4.0.1/dist/index.min.js === root.BlockstoreCore
      import { MemoryDatastore } from 'datastore-core' -> https://unpkg.com/datastore-core@9.0.3/dist/index.min.js === root.DatastoreCore
    -->
    <script src="https://unpkg.com/helia@0.0.0-42308c0/dist/index.min.js" defer></script>
    <!-- <script src="https://unpkg.com/libp2p@0.42.2/dist/index.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/libp2p@0.42.2/dist/index.min.js" defer></script>
    <!-- <script src="https://cdn.skypack.dev/pin/libp2p@v0.42.2-hPuUpIFceDrWJiBtNjg4/mode=imports/optimized/libp2p.js"></script> -->

    <!-- Not importing from unpkg because of MIME and ESM module issues -->
    <!-- <script src="https://unpkg.com/@chainsafe/libp2p-noise@11.0.1/dist/src/index.js" module defer></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/@chainsafe/libp2p-noise@11.0.1/dist/src/index.js" module defer></script> -->
    <!-- <script src="https://esm.sh/v111/@chainsafe/libp2p-noise@11.0.1/es2022/libp2p-noise.js" module defer></script> -->
    <!-- <script src="https://unpkg.com/@chainsafe/libp2p-yamux@3.0.7/dist/index.min.js" defer></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@chainsafe/libp2p-yamux@3.0.7/dist/index.min.js" defer></script>
    <!-- <script src="https://unpkg.com/@libp2p/websockets@5.0.5/dist/index.min.js" defer></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@libp2p/websockets@5.0.5/dist/index.min.js" defer></script>
    <!-- <script src="https://unpkg.com/@libp2p/bootstrap@6.0.0/dist/index.min.js" defer></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@libp2p/bootstrap@6.0.0/dist/index.min.js" defer></script>
    <!-- <script src="https://unpkg.com/blockstore-core@4.0.1/dist/index.min.js" defer></script> -->
    <script src="https://cdn.jsdelivr.net/npm/blockstore-core@4.0.1/dist/index.min.js" defer></script>
    <!-- <script src="https://unpkg.com/datastore-core@9.0.3/dist/index.min.js" defer></script> -->
    <script src="https://cdn.jsdelivr.net/npm/datastore-core@9.0.3/dist/index.min.js" defer></script>
    <script src="./src/index.js" type="module" defer></script>
    <script nomodule>
      alert('Your browser does not support importing ESM modules')
    </script>
  </head>
  <body>
    <h1>IPFS in the Browser</h1>
    <p>
      This page creates an IPFS node in your browser and drops it into the
      global Javascript namespace as
      <b><em style="background-color:#d7d6d6">node</em></b
      >. Open the console to play around with it.
    </p>
    <p>
      Note that opening two tabs of this page in the same browser won't work
      well, because they will share node configuration. You'll end up trying to
      run two instances of the same node, with the same private key and
      identity, which is a Bad Idea.
    </p>
    <h1 id="status">Node status: offline</h1>

    <h2>Some suggestions</h2>

    <p>Try adding a new file:</p>

    <code style="display:block; white-space:pre-wrap; background-color:#d7d6d6">
      async function addFile () { const { cid } = await node.add('Hello world!')
      console.log('successfully stored', cid) } addFile()
    </code>

    <p>
      You can cat that same file. If you used the exact same string as above
      ('Hello world!') you should have an hash like this:
      'QmQzCQn4puG4qu8PVysxZmscmQ5vT1ZXpqo7f58Uh9QfyY'
    </p>

    <code style="display:block; white-space:pre-wrap; background-color:#d7d6d6">
      async function catFile () { for await (const data of
      node.cat('QmQzCQn4puG4qu8PVysxZmscmQ5vT1ZXpqo7f58Uh9QfyY')) {
      console.log(data.toString()) } } catFile()
    </code>
  </body>
</html>
